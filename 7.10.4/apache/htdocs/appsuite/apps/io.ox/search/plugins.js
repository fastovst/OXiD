define("io.ox/search/plugins",["io.ox/core/extensions"],function(e){"use strict";e.point("io.ox/search/api/autocomplete").extend({id:"only-once",index:300,customize:function(e){var t=e.app.getModel();0!==_.where(t.get("poollist"),{facet:"subject"}).length&&(e.data=_.filter(e.data,function(e){return"subject"!==e.id}))}}),e.point("io.ox/search/api/autocomplete").extend({id:"custom-facet-history",index:300,customize:function(e){var t=e.app.getModel(),o=_.copy(e.data[0]),i=t.get("extensions").history;if(o&&"global"===o.id){var a=t.get("query"),n=_.chain(i).filter(function(e){return e.name.indexOf(a)>=0}).last(3).value().reverse();e.data.splice.apply(e.data,[1,0].concat(_.copy(n)))}}}),e.point("io.ox/search").extend({index:100,id:"custom-facet-history",config:function(){var e=this;e.on({"facet:add":function(t,o){var i=e.get("extensions").history;if("global"===t){var a=_.copy(e.get("pool")[t].values[o]);a.id=t+".history"+i.length,a.flags.push("history"),i.push(a)}}})}}),e.point("io.ox/search/autocomplete/item/global").extend({index:100,id:"custom-facet-history",draw:function(t){e.point("io.ox/search/autocomplete/item").invoke("draw",this,t),_.contains(t.data.flags,"history")&&this.find(".name").prepend($('<i class="fa fa-clock-o" aria-hidden="true">').css("margin-right","6px"))}})});