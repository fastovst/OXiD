define("io.ox/find/extensions-tokenfield",["io.ox/core/extensions","io.ox/core/util","io.ox/contacts/api"],function(a,t,e){"use strict";var i="io.ox/find/tokenfield";return{item:function(t){this.addClass(t.data.facet.getOriginalId()),this.attr("data-id",t.data.value.getOriginalId()),a.point(i+"/image").invoke("draw",this,t),a.point(i+"/name").invoke("draw",this,t),a.point(i+"/detail").invoke("draw",this,t)},image:function(a){if(a.data.facet.hasPersons()){var t=a.data.value.get("data").item||{};this.removeClass("indent"),this.append(e.pictureHalo($('<div class="image">'),{email:t.detail,image1_url:t.image_url},{width:40,height:40,effect:"fadeIn",urlOnly:!1}))}},name:function(a){var t=a.data.value.getName()||" ";this.data(a.data).append($('<div class="name">').text(t))},detail:function(a){var t=a.data.value.getNameDetail();a.data.facet.hasPersons()?(this.removeClass("indent"),this.append($('<div class="detail">').text(t||" "))):t&&this.find(".name").append($("<i>").text(" "+t))},click:function(a){a.data.deferred.done(function(t){var e=a.data.model.manager,i=t.get("facet");e.activate(i.get("id"),t.get("id"),t.get("option"))})}}});