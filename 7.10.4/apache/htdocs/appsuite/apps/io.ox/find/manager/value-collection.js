define("io.ox/find/manager/value-collection",["io.ox/find/manager/value-model","io.ox/find/date/value-model","io.ox/core/extensions"],function(e,t,i){"use strict";var n=i.point("io.ox/find/manager/value");return n.extend({index:100,customize:function(e){var i=$.Deferred();return _.extend(e||{},{"date.custom":t}),i}}),Backbone.Collection.extend({model:e,type:"value-collection",initialize:function(e,t,i){this.facet=i.facet,this.on("change:active change:option",function(e){var t=Object.keys(e.changed)[0],i={active:e.changed.active?"activate":"deactivate",option:"change"};this.trigger("change:list-of-actives",i[t||"option"],e.id),this.facet.trigger("change:list-of-actives",i[t||"option"],e.id,e)}),this.valuemodels={},n.invoke("customize",this,this.valuemodels)},_createModel:function(t,i){return new(this.valuemodels[i.get("id")]||e)({data:t,facet:i})},customAdd:function(e,t){var i=this;e=[].concat(e),_.each(e,function(e){i.get(e.id)||i.add(i._createModel(e,t))})},getActive:function(){return this.filter(function(e){return e.get("active")})},getInactive:function(){return this.filter(function(e){return!e.get("active")})}})});