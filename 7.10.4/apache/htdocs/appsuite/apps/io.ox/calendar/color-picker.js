define("io.ox/calendar/color-picker",["io.ox/calendar/util","gettext!io.ox/calendar","less!io.ox/calendar/color-picker"],function(o,t){"use strict";return Backbone.View.extend({className:"io-ox-calendar-color-picker",initialize:function(t){this.opt=_.extend({noColorOption:!1,additionalColor:void 0,attribute:"color",rows:3},t),t.additionalColor&&_(o.colors).findWhere({value:this.opt.additionalColor.value})&&(this.opt.additionalColor=void 0),this.onChangeColor=this.onChangeColor.bind(this),this.opt.getValue&&(this.getValue=this.opt.getValue),this.opt.setValue&&(this.setValue=this.opt.setValue)},getValue:function(){return this.model.get(this.opt.attribute)},setValue:function(o){this.model.set(this.opt.attribute,o)},onChangeColor:function(o){this.setValue($(o.currentTarget).data("value"))},renderOption:function(t){var e=_.uniqueId("color-label-");return $('<a href="#" class="color-box-link" draggable="false">').append($('<i class="fa fa-fw box color-label" aria-hidden="true">').addClass(this.getValue()===t.value?"fa-check":"fa-none").css({"background-color":t.value,color:o.getForegroundColor(t.value)}),$('<span class="sr-only">').text(t.label)).on("click",this.onChangeColor).attr({id:e,role:"menuitemradio","aria-checked":this.getValue()===t.value,"data-name":this.opt.attribute,"data-value":t.value,title:t.label})},render:function(){var e=this;return this.opt.noColorOption&&this.$el.append(this.renderOption({label:t("no color")}).addClass("no-color")),o.colors.forEach(function(o){e.$el.append(e.renderOption(o))}),this.opt.additionalColor&&this.$el.append(this.renderOption(this.opt.additionalColor)),this}})});