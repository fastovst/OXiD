define("io.ox/calendar/detail/main",["io.ox/calendar/api","io.ox/calendar/util","io.ox/core/extensions","io.ox/calendar/view-detail","gettext!io.ox/calendar","io.ox/core/notifications"],function(e,t,a,i,o,n){"use strict";var r="io.ox/calendar/detail";return ox.ui.App.mediator(r,{"show-appointment":function(r){r.showAppointment=function(d){e.get(d).then(function(n){r.setTitle(n.get("summary")),r.getWindowNode().addClass("detail-view-app").append($('<div class="f6-target detail-view-container" tabindex="0" role="complementary">').attr({"aria-label":o("Appointment Details")}).append(i.draw(new a.Baton({model:n})))),e.once("delete:"+t.cid(n.attributes),function(){r.quit()})},function(){n.yell("error",o("An error occurred. Please try again."))})}},metrics:function(e){require(["io.ox/metrics/main"],function(t){function a(e,a){var i=!!(a=$(a)).attr("data-name"),o=(a.attr("data-action")||"").replace(/^io\.ox\/calendar\/(detail\/)?/,"");t.trackEvent({app:"calendar",target:e,type:"click",action:i?a.attr("data-name"):o,detail:i?a.attr("data-value"):""})}t.isEnabled()&&e.getWindow().nodes.body.on("track",function(e,t){a("detail-standalone/toolbar",t)})})}}),{getApp:function(){var e=ox.ui.createApp({closable:!0,name:r,title:"",floating:!_.device("smartphone")});return e.setLauncher(function(a){var i=ox.ui.createWindow({chromeless:!0,name:r,toolbar:!1,closable:!0,floating:!_.device("smartphone")});e.setWindow(i),e.mediate(),i.show();var o,n=a.cid;if(void 0!==n)return o=t.cid(n),e.setState({folder:o.folder,id:o.id,recurrenceId:o.recurrenceId||null}),void e.showAppointment(o);a.folder&&a.id&&e.setState({folder:a.folder,id:a.id}),(o=e.getState()).folder&&o.id&&e.showAppointment(o)})}}});