define("io.ox/calendar/edit/timezone-dialog",["io.ox/core/extensions","io.ox/backbone/views/modal","gettext!io.ox/calendar/edit/main","io.ox/backbone/mini-views/timezonepicker","io.ox/calendar/util"],function(e,t,o,n,a){"use strict";return e.point("io.ox/calendar/edit/timezone-dialog").extend({id:"start-date-selection",index:100,draw:function(e){var t=_.uniqueId("form-control-label-");this.append($('<div class="form-group">').append($("<label>").attr("for",t).text(o("Start date timezone")),new n({id:t,name:"startTimezone",model:e.model,className:"form-control",showFavorites:!0}).render().$el))}}),e.point("io.ox/calendar/edit/timezone-dialog").extend({id:"end-date-selection",index:200,draw:function(e){var t=_.uniqueId("form-control-label-");this.append($('<div class="form-group">').append($("<label>").attr("for",t).text(o("End date timezone")),new n({id:t,name:"endTimezone",model:e.model,className:"form-control",showFavorites:!0}).render().$el))}}),{open:function(n){var i=new Backbone.Model({startTimezone:n.model.getMoment("startDate").tz(),endTimezone:n.model.getMoment("endDate").tz()});new t({title:o("Change timezone")}).addCancelButton({left:!0}).addButton({label:o("Change"),action:"changeTZ"}).build(function(){e.point("io.ox/calendar/edit/timezone-dialog").invoke("draw",this.$body,{model:i})}).on("changeTZ",function(){var e=n.model.getMoment("startDate").tz(i.get("startTimezone")),t=n.model.getMoment("endDate").tz(i.get("endTimezone"));n.model.set({startDate:{value:e.clone().utc().format(a.ZULU_FORMAT),tzid:e.tz()},endDate:{value:t.clone().utc().format(a.ZULU_FORMAT),tzid:t.tz()}})}).open()}}});