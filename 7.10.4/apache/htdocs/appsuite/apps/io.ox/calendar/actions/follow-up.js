define("io.ox/calendar/actions/follow-up",["io.ox/calendar/util"],function(e){"use strict";return function(t){var a=t.pick("color class folder location description participants attendees transp summary".split(" ")),n=!1,o=e.isAllday(t),i=o?"YYYYMMDD":"YYYYMMDD[T]HHmmss";["startDate","endDate"].forEach(function(e){var d=t.getMoment(e),r=moment({hour:d.hour(),minute:d.minute()}).weekday(d.weekday()),s=moment.max(r,d);(n||s.isBefore(moment())||s.isSameOrBefore(d))&&(s.add(1,"w"),n=!0),"endDate"===e&&o&&s.subtract(1,"day"),a[e]={value:s.format(i),tzid:t.get(e).tzid}}),a.attendees=e.cleanupAttendees(a.attendees),ox.load(["io.ox/calendar/edit/main"]).done(function(e){e.getApp().launch().done(function(){this.create(a)})})}});