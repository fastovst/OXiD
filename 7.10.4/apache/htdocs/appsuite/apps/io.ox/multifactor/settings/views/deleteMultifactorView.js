define("io.ox/multifactor/settings/views/deleteMultifactorView",["io.ox/backbone/views","io.ox/core/extensions","io.ox/backbone/mini-views","io.ox/backbone/views/modal","io.ox/core/yell","io.ox/multifactor/api","io.ox/multifactor/auth","gettext!io.ox/core/boot"],function(e,t,o,i,n,r,a,d){"use strict";function l(e){return new i({async:!0,point:f,title:d("Delete Multifactor Device"),width:640,enter:"cancel",model:new Backbone.Model({device:e,id:$(e).attr("data-deviceId"),name:$(e).attr("data-deviceName"),provider:$(e).attr("data-provider")})}).build(function(){}).addAlternativeButton({label:d("Delete"),action:"delete"}).on("delete",function(){var e=this;c(this.model).done(function(){e.close(),u.resolve()}).fail(function(t){e.idle(),t&&t.length>1&&n("error",t),u.reject()})}).addButton({label:d("Cancel"),action:"cancel"}).open()}function c(e){var t=$.Deferred();return r.deleteDevice(e.get("provider"),e.get("id")).then(t.resolve,function(){n("error",d("Unable to delete")),t.reject(),s.close()}),t}var u,s,f="multifactor/settings/deleteMultifactor",v=0;return t.point(f).extend({index:v+=100,id:"header",render:function(e){var t=$("<label>").text(d("This will delete the device named %s.",e.model.get("name"))).append("<br>");this.$body.append(t)}}),{open:function(e){return s=l(e),u=new $.Deferred},doDelete:c}});