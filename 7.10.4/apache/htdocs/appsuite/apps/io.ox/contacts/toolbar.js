define("io.ox/contacts/toolbar",["io.ox/core/extensions","io.ox/backbone/mini-views/dropdown","io.ox/backbone/views/toolbar","gettext!io.ox/contacts","io.ox/contacts/api","settings!io.ox/contacts","io.ox/contacts/actions","less!io.ox/contacts/style"],function(o,t,e,i,n,a){"use strict";if(!_.device("smartphone")){var c=o.point("io.ox/contacts/toolbar/links"),l={create:{prio:"hi",mobile:"hi",title:i("New contact"),dropdown:"io.ox/contacts/toolbar/new",drawDisabled:!0},edit:{prio:"hi",mobile:"hi",title:i("Edit"),tooltip:i("Edit contact"),drawDisabled:!0,ref:"io.ox/contacts/actions/update"},send:{prio:"hi",mobile:"hi",title:i("Send email"),ref:"io.ox/contacts/actions/send"},invite:{prio:"hi",mobile:"hi",title:i("Invite"),tooltip:i("Invite to appointment"),ref:"io.ox/contacts/actions/invite"},delete:{prio:"hi",mobile:"hi",title:i("Delete"),tooltip:i("Delete contact"),drawDisabled:!0,ref:"io.ox/contacts/actions/delete"},vcard:{prio:"lo",mobile:"lo",title:i("Send as vCard"),drawDisabled:!0,ref:"io.ox/contacts/actions/vcard"},move:{prio:"lo",mobile:"lo",title:i("Move"),ref:"io.ox/contacts/actions/move",drawDisabled:!0,section:"file-op"},copy:{prio:"lo",mobile:"lo",title:i("Copy"),ref:"io.ox/contacts/actions/copy",drawDisabled:!0,section:"file-op"},print:{prio:"lo",mobile:"lo",title:i("Print"),drawDisabled:!0,ref:"io.ox/contacts/actions/print",section:"export"},export:{prio:"lo",mobile:"lo",title:i("Export"),drawDisabled:!0,ref:"io.ox/contacts/actions/export",section:"export"},"add-to-portal":{prio:"lo",mobile:"lo",title:i("Add to portal"),ref:"io.ox/contacts/actions/add-to-portal",section:"export"}},r=0;_(l).each(function(o,t){o.id=t,o.index=r+=100,c.extend(o)}),o.point("io.ox/contacts/toolbar/links").extend({id:"view-dropdown",index:1e4,custom:!0,draw:function(o){new t({el:this,caret:!0,model:o.app.props,label:i("View")}).group(i("Options")).option("folderview",!0,i("Folder view"),{group:!0}).option("checkboxes",!0,i("Checkboxes"),{group:!0}).render().$el.addClass("pull-right dropdown").attr("data-dropdown","view")}}),o.point("io.ox/contacts/mediator").extend({id:"toolbar",index:1e4,setup:function(o){var t=new e({point:"io.ox/contacts/toolbar/links",title:o.getTitle(),strict:!1}),i=a.get("toolbar/limits/fetch",100);o.getWindow().nodes.body.addClass("classic-toolbar-visible").prepend(t.$el),o.updateToolbar=function(o){var e={data:[],folder_id:this.folder.get(),app:this};t.setSelection(o,function(){return o.length?(o.length<=i?n.getList(o):$.when(o)).then(function(o){return e.data=o,e}):e})}}}),o.point("io.ox/contacts/mediator").extend({id:"update-toolbar",index:10200,setup:function(o){o.updateToolbar([]),o.getGrid().selection.on("change",function(t,e){o.updateToolbar(e)}),n.on("update",function(){o.updateToolbar(o.getGrid().selection.get())})}})}});