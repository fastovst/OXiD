define("io.ox/contacts/mobile-toolbar-actions",["io.ox/core/extensions","io.ox/backbone/views/toolbar","io.ox/backbone/views/actions/mobile","io.ox/contacts/api","gettext!io.ox/mail"],function(o,e,t,i,a){"use strict";var n={create:{prio:"hi",mobile:"hi",title:a("New contact"),icon:"fa fa-plus",drawDisabled:!0,ref:"io.ox/contacts/actions/create"},send:{prio:"hi",mobile:"hi",title:a("Send email"),icon:"fa fa-envelope-o",ref:"io.ox/contacts/actions/send",drawDisabled:!0},export:{prio:"lo",mobile:"lo",title:a("Export"),ref:"io.ox/contacts/actions/export",drawDisabled:!0},vcard:{prio:"lo",mobile:"lo",title:a("Send as vCard"),ref:"io.ox/contacts/actions/vcard",drawDisabled:!0},invite:{prio:"hi",mobile:"hi",title:a("Invite to appointment"),icon:"fa fa-calendar-o",ref:"io.ox/contacts/actions/invite",drawDisabled:!0},edit:{prio:"hi",mobile:"hi",title:a("Edit"),icon:"fa fa-pencil",ref:"io.ox/contacts/actions/update",drawDisabled:!0},delete:{prio:"hi",mobile:"hi",title:a("Delete"),icon:"fa fa-trash-o",drawDisabled:!0,ref:"io.ox/contacts/actions/delete"},move:{mobile:"lo",title:a("Move"),drawDisabled:!0,ref:"io.ox/contacts/actions/move"},copy:{mobile:"lo",title:a("Copy"),drawDisabled:!0,ref:"io.ox/contacts/actions/copy"}},c={listView:"io.ox/contacts/mobile/toolbar/listView",detailView:"io.ox/contacts/mobile/toolbar/detailView"};t.addAction(c.listView,n,["create"]),t.addAction(c.detailView,n,["edit","send","invite","vcard","delete","move","copy"]),t.createToolbarExtensions(c);var s=_.debounce(function(e){var t=this;i.get(e).done(function(e){if(e){var i=o.Baton({data:e,app:t});t.pages.getToolbar("detailView").setBaton(i)}})},50);o.point("io.ox/contacts/mediator").extend({id:"toolbar-mobile",index:10100,setup:function(o){_.device("!smartphone")||(o.updateToolbar=s)}}),o.point("io.ox/contacts/mediator").extend({id:"update-toolbar-mobile",index:10300,setup:function(e){function t(t){!0===e.props.get("checkboxes")&&(0!==t.length?i.getList(t).done(function(t){if(t){var i=o.Baton({data:t,app:e});e.pages.getSecondaryToolbar("listView").setBaton(i)}}):e.pages.getSecondaryToolbar("listView").setBaton(o.Baton({data:[],app:e})))}_.device("smartphone")&&(e.grid.on("change:ids",function(){e.folder.getData().done(function(t){var i=o.Baton({data:t,app:e});e.pages.getToolbar("listView").setBaton(i)})}),e.grid.selection.on("select pagechange:detailView",function(){if(!0!==e.props.get("checkboxes")){var o=e.grid.selection.get();e.updateToolbar(o[0])}}),e.grid.selection.on("change",function(o,e){t(e)}),e.props.on("change:checkboxes",function(){t(e.grid.selection.get())}))}}),o.point("io.ox/contacts/mediator").extend({id:"change-mode-toolbar-mobile",index:10400,setup:function(o){_.device("smartphone")&&o.props.on("change:checkboxes",function(e,t){o.pages.toggleSecondaryToolbar("listView",t)})}})});