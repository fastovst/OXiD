define("io.ox/files/toolbar",["io.ox/core/extensions","io.ox/backbone/mini-views/dropdown","io.ox/backbone/views/toolbar","io.ox/core/notifications","gettext!io.ox/files","io.ox/files/api","io.ox/core/folder/api","io.ox/files/actions","less!io.ox/files/style"],function(o,e,i,t,l,r,n){"use strict";var s=o.point("io.ox/files/toolbar/links"),a={create:{prio:"hi",mobile:"hi",title:l("New"),dropdown:"io.ox/files/toolbar/new"},edit:{prio:"hi",mobile:"lo",title:l("Edit"),ref:"io.ox/files/actions/editor"},share:{prio:"hi",mobile:"lo",title:l("Share"),dropdown:"io.ox/files/toolbar/share"},viewer:{prio:"hi",mobile:"lo",icon:"fa fa-eye",title:l("View"),ref:"io.ox/files/actions/viewer"},download:{prio:"hi",mobile:"lo",icon:"fa fa-download",title:l("Download"),ref:"io.ox/files/actions/download"},"download-folder":{prio:"hi",mobile:"lo",icon:"fa fa-download",title:l("Download"),ref:"io.ox/files/actions/download-folder"},delete:{prio:"hi",mobile:"lo",icon:"fa fa-trash-o",title:function(o){var e=n.pool.getModel(o.folder_id);return l(e&&n.is("trash",e.toJSON())?"Delete forever":"Delete")},ref:"io.ox/files/actions/delete"},back:{prio:"lo",mobile:"hi",label:l("Folders"),ref:"io.ox/files/favorite/back"},addToFavorites:{prio:"lo",mobile:"lo",title:l("Add to favorites"),ref:"io.ox/files/actions/favorites/add",section:"favorites"},removeFromFavorites:{prio:"lo",mobile:"lo",title:l("Remove from favorites"),ref:"io.ox/files/actions/favorites/remove",section:"favorites"},"show-in-folder":{prio:"lo",mobile:"lo",title:l("Show in Drive"),ref:"io.ox/files/actions/show-in-folder",section:"favorites"},rename:{prio:"lo",mobile:"lo",title:l("Rename"),ref:"io.ox/files/actions/rename",section:"edit"},"edit-description":{prio:"lo",mobile:"lo",title:l("Edit description"),ref:"io.ox/files/actions/edit-description",section:"edit"},"save-as-pdf":{prio:"lo",mobile:"lo",title:l("Save as PDF"),ref:"io.ox/files/actions/save-as-pdf",section:"save-as"},send:{prio:"lo",mobile:"lo",title:l("Send by email"),ref:"io.ox/files/actions/send",section:"share"},"add-to-portal":{prio:"lo",mobile:"lo",title:l("Add to portal"),ref:"io.ox/files/actions/add-to-portal",section:"share"},move:{title:l("Move"),prio:"lo",mobile:"lo",ref:"io.ox/files/actions/move",section:"file-op"},copy:{prio:"lo",mobile:"lo",title:l("Copy"),ref:"io.ox/files/actions/copy",section:"file-op"},lock:{prio:"lo",mobile:"lo",title:l("Lock"),ref:"io.ox/files/actions/lock",section:"file-op"},unlock:{prio:"lo",mobile:"lo",title:l("Unlock"),ref:"io.ox/files/actions/unlock",section:"file-op"},restore:{prio:"lo",mobile:"lo",title:l("Restore"),ref:"io.ox/files/actions/restore",section:"file-op"}},d=0;_(a).each(function(o,e){o.id=e,o.index=d+=100,s.extend(o)}),o.point("io.ox/files/toolbar/links").extend({id:"view-dropdown",index:1e4,custom:!0,draw:function(o){if(!_.device("smartphone")&&!o.originFavorites){var i=new e({el:this,model:o.app.props,label:l("View"),caret:!0}).group(l("Layout")).option("layout","list",l("List"),{group:!0}).option("layout","icon",l("Icons"),{group:!0}).option("layout","tile",l("Tiles"),{group:!0}).divider().group(l("Options")).option("checkboxes",!0,l("Checkboxes"),{group:!0}).option("folderview",!0,l("Folder view"),{group:!0});_.device("!touch")&&i.option("details",!0,l("File details"),{group:!0}),i.render().$el.addClass("dropdown pull-right").attr("data-dropdown","view")}}}),o.point("io.ox/files/mediator").extend({id:"toolbar",index:1e4,setup:function(o){var e=new i({point:"io.ox/files/toolbar/links",title:o.getTitle(),strict:!1});o.getWindow().nodes.body.addClass("classic-toolbar-visible").prepend(e.$el),o.updateToolbar=_.debounce(function(o){e.setSelection(o.map(_.cid),function(){return this.getContextualData(o,"main")}.bind(this))},10)}}),o.point("io.ox/files/mediator").extend({id:"update-toolbar",index:10200,setup:function(o){function e(){o.updateToolbar(o.listView.selection.get())}e(),o.listView.on("selection:change change",e),r.on("favorite:add favorite:remove",e),n.on("favorite:add favorite:remove",e),o.on("folder:change",o.updateToolbar.bind(o,[]))}})});