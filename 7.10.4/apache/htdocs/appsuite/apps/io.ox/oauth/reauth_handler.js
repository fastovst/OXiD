define("io.ox/oauth/reauth_handler",["gettext!io.ox/core"],function(o){"use strict";function e(o){return{"OAUTH-0040":1,"MSG-0114":5}[o]}ox.on("http:error:OAUTH-0040 http:error:MSG-0114",function(t){t.handled=!0,$(".modal.oauth-reauthorize").length>0||require(["io.ox/backbone/views/modal","io.ox/oauth/keychain"]).then(function(r,n){var a=n.accounts.get(t.error_params[e(t.code)]);!a||a.has("reauthCooldown")&&_.now()<a.get("reauthCooldown")||(a.set("reauthCooldown",_.now()+6e5),new r({title:o("Error")}).build(function(){this.$el.addClass("oauth-reauthorize"),this.$body.append(t.error)}).addCancelButton().addButton({action:"reauthorize",label:o("Reauthorize")}).on("reauthorize",function(){a.reauthorize().then(function(){ox.trigger("please:refresh")})}).open())})})});