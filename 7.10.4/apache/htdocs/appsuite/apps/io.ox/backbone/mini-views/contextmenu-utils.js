define("io.ox/backbone/mini-views/contextmenu-utils",[],function(){"use strict";function e(e,t){return $('<a href="#" role="menuitem" tabindex="-1">').attr("data-action",e).text(t).on("click",$.preventDefault)}function t(e){return e.attr("aria-disabled",!0).removeAttr("tabindex").addClass("disabled")}var n={a:e,disable:t,addLink:function(n,a){var i=e(a.action,a.text);return a.enabled?i.on("click",a.data,a.handler):t(i),n.append($('<li role="presentation">').append(i)),i},divider:function(){this.append($('<li class="divider" role="separator">'))},header:function(e){this.append($('<li class="dropdown-header" role="presentation" aria-hidden="true">').text(e))},macOSKeyboardHandler:function(e){var t=e.shiftKey&&121===e.which;_.device("macos")&&t&&(e.isKeyboardEvent=!0)},checkKeyboardEvent:function(e){_.device("macos || !desktop")||(_.device("chrome || firefox")&&0===e.button?e.isKeyboardEvent=!0:_.device("ie")&&0===e.pageX&&0===e.pageY&&(e.isKeyboardEvent=!0))},positionForEvent:function(e){n.checkKeyboardEvent(e);var t,a,i,r;return e.isKeyboardEvent?(a=(r=(t=$(document.activeElement)).offset()).top,i=r.left+t.width()/2):(t=$(e.currentTarget),a=e.pageY-20,i=e.pageX+30),{target:t,top:a,left:i}}};return n});