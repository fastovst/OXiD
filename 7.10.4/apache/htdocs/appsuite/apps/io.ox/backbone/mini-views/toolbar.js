define("io.ox/backbone/mini-views/toolbar",["io.ox/backbone/views/disposable","io.ox/core/a11y","gettext!io.ox/core"],function(t,i,o){"use strict";return t.extend({className:"classic-toolbar-container",events:{"mousedown ul.classic-toolbar > li > a":"onMousedown"},initialize:function(t){this.options=_.extend({tabindex:0},t),this.$list=this.createToolbar()},createToolbar:function(){return $('<ul class="classic-toolbar" role="toolbar">').attr({"aria-label":this.options.title?o("%1$s toolbar. Use cursor keys to navigate.",this.options.title):o("Actions. Use cursor keys to navigate.")}).on("click","a",$.preventDefault)},render:function(){return this.$el.append(this.$list),this},getButtons:function(){return this.$el.find("ul.classic-toolbar > li > a").not(":hidden")},disableButtons:function(){return this.getButtons().off().tooltip("hide").tooltip("disable"),this},replaceToolbar:function(t){var i;if($.contains(this.el,document.activeElement)){var o=$(document.activeElement),e=o.data("action");i=e?'*[data-action="'+e+'"]':">> li:eq("+o.closest("li").index()+") "+o.prop("tagName")+":first"}return t.append(t.children(".pull-right")),this.$el.find("ul.classic-toolbar").tooltip("hide").replaceWith(t),i&&this.$(i).focus(),this},initButtons:function(){this.$links=this.getButtons().attr({role:"button",tabindex:-1}),this.$links.first().attr({tabindex:this.options.tabindex})},onMousedown:function(t){this.$links.attr("tabindex",-1),$(t.currentTarget).attr("tabindex",this.options.tabindex)}})});