define("io.ox/backbone/validation",["io.ox/core/extensions","io.ox/core/util","settings!io.ox/core","gettext!io.ox/core"],function(e,t,n,a){"use strict";var r=function(e){return _.isUndefined(e)||null===e||""===e},i={string:function(){return!0},text:function(){return!0},anyFloat:function(e){return!!r(e)||(e=String(e).replace(/,/g,".").replace(/\.0*$/,""),!isNaN(parseFloat(e,10))&&parseFloat(e,10).toString().length===e.toString().length||a("Please enter a valid number"))},number:function(e){return r(e)||!isNaN(parseFloat(e,10))&&parseFloat(e,10).toString().length===e.toString().length||a("Please enter a valid number")},array:function(e){return _.isArray(e)||"Please enter a valid array"},boolean:function(e){return _.isBoolean(e)||"Please enter a bool"},date:function(e){return!(null!==e&&!_.isNumber(e)||e>0xe677ccf98008)||a("Please enter a valid date")},pastDate:function(e){return _.isString(e)&&""!==e?a("Please enter a valid date"):_.now()>e||a("Please enter a date in the past")},email:function(e){return!1===n.get("features/validateMailAddresses",!0)||t.isValidMailAddress(e)||a("Please enter a valid email address")},phone:function(e){return!1===n.get("features/validatePhoneNumbers",!1)||t.isValidPhoneNumber(e)||a("Please enter a valid phone number. Allowed characters are: %1$s","0-9 , . - ( ) # + ; /")},url:function(){return!0},object:function(e){return _.isObject(e)||a("Please enter a valid object")}};return e.point("io.ox/backbone/validation/formats").invoke("customize",i,i),e.point("io.ox/backbone/validation/formats").on("extended",function(e){e.invoke("customize",i,i)}),{validationFor:function(t,n){var o=t+(/\/$/.test(t)?"validation":"/validation");_(n).each(function(t,n){e.point(o+"/"+n).extend({id:t.id||n,validate:function(e,a,r){var o=[];if(t.format&&i[t.format]){var l=i[t.format].call(a,e);!0!==l&&o.push(l)}if(t.fn){var s=t.fn.apply(a,e,a,r,n);s&&(_.isArray(s)?_(s).each(function(e){o.push(e)}):o.push(s))}return o}}),t.mandatory&&e.point(o+"/save").extend({id:n+"-is-mandatory",validate:function(e,t){var i=e[n];r(i)&&t.add(n,a("Please enter a value"))}})})},formats:i}});