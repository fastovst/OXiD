define("io.ox/mail/mailfilter/vacationnotice/indicator",["io.ox/mail/mailfilter/vacationnotice/model","io.ox/backbone/views/extensible","io.ox/core/extensions","gettext!io.ox/mail"],function(t,i,e,n){"use strict";var o=i.extend({point:"io.ox/mail/vacation-notice/indicator",el:'<div class="alert alert-info alert-dismissable ellipsis indicator" role="alert">',events:{"click .btn-close":"onClose",'click a[data-action="edit-vacation-notice"]':"onEdit"},onEdit:function(t){t.preventDefault(),require(["io.ox/mail/mailfilter/vacationnotice/view"],function(t){t.open()})},attachTo:function(i){this.model=new t,this.model.fetch().done(function(){i.before(this.render().$el.hide()),this.listenTo(ox,"mail:change:vacation-notice",this.onChange),this.onChange(this.model)}.bind(this))},onClose:function(t){var i=$(t.delegateTarget).nextAll(".list-view-control");this.$el.hide(),i.css("top",i.position().top-40)},activeElements:[],setActiveState:function(t){var i=_.indexOf(this.activeElements,t.id);t.isActive()&&-1===i?this.activeElements.push(t.id):-1!==i&&this.activeElements.splice(i,1)},onChange:function(t){this.setActiveState(t);var i=-1!==_.indexOf(this.activeElements,t.id),e=this.$el.nextAll(".list-view-control");this.$el.toggle(i),1===this.activeElements.length?e.css("top",40):2===this.activeElements.length?e.css("top",80):e.css("top",0)}});return e.point("io.ox/mail/vacation-notice/indicator").extend({id:"link",index:100,render:function(){var t=n("Your vacation notice is active");this.$el.append($('<i class="fa fa-warning" aria-hidden="true">'),$('<span class="sr-only">').text(n("Warning")),$('<a href="#" data-action="edit-vacation-notice">').text(t))}},{id:"close",index:200,render:function(){this.$el.append($('<button type="button" class="btn btn-link btn-close">').attr("title",n("Close")).append($('<i class="fa fa-times" aria-hidden="true">')))}}),o});