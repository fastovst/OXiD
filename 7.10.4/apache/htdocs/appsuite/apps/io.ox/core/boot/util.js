define("io.ox/core/boot/util",[],function(){"use strict";function o(){var o=n;o&&("function"==typeof o&&(o=o()),"string"==typeof o&&(o=$.txt(o)),$("#io-ox-login-feedback").empty().append($('<div role="alert" class="selectable-text alert alert-info">').append(o)))}function e(o){document.title=document.customTitle=_.compact(_.uniq(o)).concat(ox.serverConfig.productName).join(" - ")}var n=null;ox.on("language",o),ox.on("change:document:title",function(o){var n=[].concat(o),t=_.lfo(e);if(ox.signin)return t(n);require(["io.ox/core/api/user","io.ox/contacts/util"],function(o,e){o.get({id:ox.user_id}).done(function(o){var r=e.getMailFullName(o)||ox.user;n.push(r),t(n)})})});var t={DURATION:250,debug:$.noop,gt:_.identity,setPageTitle:function(o){ox.trigger("change:document:title",o),$('[name="apple-mobile-web-app-title"]').attr("content",o)},feedback:function(e,t){n=t,o()},cleanUp:function(){$("#io-ox-login-form").off("submit").find("input, button").prop("readonly",!0)},gotoSignin:function(o){var e=(location.hash||"").replace(/^#/,""),n=_.url.vars(ox.serverConfig.loginLocation||ox.loginLocation),t=n.indexOf("#")>-1?"&":"#";o=(o||"")+(e?"&ref="+encodeURIComponent(e):""),_.url.redirect(o?n+t+o:n)},isAnonymous:function(){return"anonymous_password"===_.url.hash("login_type")},isGuest:function(){return"guest"===_.url.hash("login_type")},isContinue:function(){return/^(guest|message_continue)$/.test(_.url.hash("login_type"))},isGuestWithPassword:function(){return"guest_password"===_.url.hash("login_type")},fail:function(o,e){var n=this;this.restore(),o&&"0 general"===o.error?this.feedback("error","No connection to server. Please check your internet connection and retry."):o&&"LGI-0011"===o.code?this.feedback("error",function(){return[$("<p>").text(n.gt("Your password is expired. Please change your password to continue.")),$('<a target="_blank" role="button" class="btn btn-primary btn">').text(n.gt("Change password")).attr("href",o.error_params[0])]}):o&&"LGI-0016"===o.code&&1===(o.error_params||[]).length?_.url.redirect(o.error_params[0]):this.feedback("error",$.txt(_.formatError(o,"%1$s (%2$s)")));var t=_.isString(e)&&e||this.isAnonymous()&&"password"||"username";$("#io-ox-login-"+t).focus().select(),ox.trigger("login:fail",o)},restore:function(){$("#io-ox-login-form").css("opacity","").find("input").prop("disabled",!1),$("#io-ox-login-blocker").hide()},lock:function(){$("#io-ox-login-form").css("opacity",.5).find("input").prop("disabled",!0),$("#io-ox-login-blocker").show()},checkTabHandlingSupport:function(){return!(ox.serverConfig.openInSingleTab||_.device("ie && ie <= 11")||_.device("smartphone")||_.device("tablet")||_.device("touch && macos"))}};return ox.relogin=function(){require("io.ox/core/extPatterns/stage").run("io.ox/core/boot/login",{},{methodName:"relogin"})},ox.on("relogin:required",ox.relogin),ox.busy=function(o){$("#background-loader")[o?"busy":"idle"]().show().addClass("secure"+(o?" block":""))},ox.idle=function(){$("#background-loader").removeClass("secure block").hide().idle().empty()},ox.disable=function(){$("#background-loader").addClass("busy block secure").on("touchmove",function(o){return o.preventDefault(),!1}).show()},/\bboot/.test(_.url.hash("debug"))&&(t.debug=function(){var o=_(arguments).toArray(),e=_.now()-ox.t0;o.unshift("boot ("+(e/1e3).toFixed(1)+"s): "),console.log.apply(console,o)}),t});