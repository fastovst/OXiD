define("io.ox/core/settings/downloads/pane",["io.ox/core/extensions","io.ox/core/capabilities","io.ox/core/config","gettext!io.ox/core","settings!io.ox/core","settings!plugins/portal/oxdriveclients","less!io.ox/core/settings/downloads/style","less!plugins/portal/oxdriveclients/style"],function(o,e,n,s,i,t){"use strict";if(!i.get("settings/downloadsDisabled")){var a=((n.get("modules")||{})["com.openexchange.oxupdater"]||{}).products||[],d={};if(_.each(a,function(o){var e=Object.keys(o);_.each(e,function(e){d[e]=o[e]})}),e.has("drive")){var l=t.get("productName"),r=t.get("linkTo"),c=function(o,e){var n=ox.language.split("_")[0],i=t.get("l10nImages"),a=ox.abs+ox.root+"/apps/plugins/portal/oxdriveclients/img/";o=o.toLowerCase(),-1===_.indexOf(i,n)&&(n="en");var d=$('<div aria-hidden="true" class="oxdrive-shop-image">').addClass(o).css("background-image","url("+a+n+"_"+o+".png)");return $('<a class="shoplink" target="_blank">').attr("href",e).append(d,$('<span class="sr-only">').text(s.format(s("Download the %s client for %s"),l,o)))};o.point("io.ox/core/settings/downloads/pane/detail").extend({id:"oxdrive",index:200,draw:function(){var o=!0===t.get("standaloneWindowsClient")||d["com.openexchange.updater.drive"],e=ox.apiRoot+r.Windows+"?session="+ox.session,n=s.format(s("%s client for Windows"),l);this.append($('<section class="oxdrive">').append($("<fieldset>").append($('<legend class="sectiontitle">').append($("<h2>").text(l)),o?$('<div class="shop-link-container">').append($.txt(n),$("<br>"),$('<i class="fa fa-download" aria-hidden="true">'),$('<a class="action" target="_blank">',{href:e,download:""}).text(s("Download installation file"))):[],$('<div class="shop-link-container">').append(s.format(s("%s client for Mac OS"),l),c("mac_os",r["Mac OS"])),$('<div class="shop-link-container">').append(s.format(s("%s client for iOS"),l),c("iOS",r.iOS)),$('<div class="shop-link-container">').append(s.format(s("%s client for Android"),l),c("Android",r.Android)))))}})}0===o.point("io.ox/core/settings/downloads/pane/detail").list().length||e.has("guest")||(o.point("io.ox/settings/pane/tools").extend({id:"io.ox/core/downloads",index:300,title:s("Downloads"),pane:"io.ox/core/settings/downloads/pane"}),o.point("io.ox/core/settings/downloads/pane").extend({draw:function(){this.addClass("downloads-settings-pane").append($("<h1>").text(s("Downloads"))),o.point("io.ox/core/settings/downloads/pane/detail").invoke("draw",this)}}))}});