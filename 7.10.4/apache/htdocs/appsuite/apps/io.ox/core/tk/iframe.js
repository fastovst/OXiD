define("io.ox/core/tk/iframe",["io.ox/core/http","io.ox/core/notifications","gettext!io.ox/core/tk/iframe"],function(e,o,t){"use strict";return function(n){function r(e,o){var t,r=n.url,i=$("<iframe>",{src:r,frameborder:0});i.css({width:"100%",height:"100%"}),e.nodes.main.append(i),o&&o.token&&(t=/[?]/.test(r)?r+"&ox_token="+o.token:r+"?ox_token="+o.token,i.attr("src",t)),e.show()}var i=ox.ui.createApp(n);return i.setLauncher(function(){var a=ox.ui.createWindow({name:n.name,chromeless:!0});if(i.setWindow(a),a.setTitle(n.pageTitle),n.acquireToken)return e.GET({module:"token",params:{action:"acquireToken"}}).done(function(e){e&&e.token?r(a,e):(o.yell("error",t("An error occurred. There is no valid token available.")),r(a,e))});r(a)}),{getApp:i.getInstance}}});