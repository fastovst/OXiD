define("io.ox/core/tk/hotspot",[],function(){"use strict";function t(t){var i=t.offset();return i.width=t.outerWidth(),i.height=t.outerHeight(),i.availableWidth=$(window).width(),i.availableHeight=$(window).height(),i.right=i.availableWidth-i.width-i.left,i.bottom=i.availableHeight-i.height-i.top,i}return{listening:!1,add:function(t,i){if(t){i=_.extend({top:0,left:0,tooltip:"",selector:t},i);var e=$('<div class="hotspot">').data("options",i);i.tooltip&&e.tooltip({placement:"auto top",title:i.tooltip}),$("body").append(this.position(e,i)),this.register()}},position:function(i,e){var o=$(e.selector).filter(":visible");if(!o.length)return o;var n=t(o);return i.css({top:n.top-4+e.top,left:(n.left||n.width/2>>0)-4+e.left})},reposition:function(){var t=this;$(".hotspot").each(function(){var i=$(this),e=i.data("options");t.position(i,e)})},removeAll:function(){$(".hotspot").remove(),this.deregister()},register:function(){this.listening||(this.onResize=this.onResize||_.debounce(this.reposition.bind(this),100),this.listening=!0,$(window).on("resize.hotspot",this.onResize))},deregister:function(){this.listening&&(this.listening=!1,$(window).off("resize.hotspot",this.onResize))}}});