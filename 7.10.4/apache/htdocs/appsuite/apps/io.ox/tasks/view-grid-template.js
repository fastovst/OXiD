define("io.ox/tasks/view-grid-template",["io.ox/core/tk/vgrid","io.ox/tasks/util","gettext!io.ox/tasks","less!io.ox/tasks/style"],function(e,t,a){"use strict";var s={main:{build:function(){var e,t,a,s,i,r;return this.addClass("tasks").append($('<div class="first-row">').append(e=$('<div class="title" aria-hidden="true">'),a=$('<span class="end_date" aria-hidden="true">'),r=$('<i class="fa fa-lock private-flag" aria-hidden="true">').hide()),$('<div class="second-row">').append(t=$('<span class="status" aria-hidden="true">'),s=$('<i class="participants fa fa-user" aria-hidden="true">').hide(),i=$('<div class="progress" aria-hidden="true" style="background-size:0%"></div>').hide())),{title:e,private_flag:r,end_time:a,status:t,user:s,progress:i}},set:function(e,s,i,r,d){var n=e,l=n.title;n.badge||""===n.badge||(n=t.interpretTask(e,{noOverdue:"urgency"!==d.prop("sort")})),s.status.attr("class","status "+n.badge).text(n.status||"Â "),l=l+", "+n.status,s.title.text(n.title),e.full_time||s.title.addClass("not-fulltime"),s.end_time.text(n.end_time),e.end_time&&(l=l+", "+a("ends:")+" "+t.getSmartEnddate(e)),n.participants&&n.participants.length?(s.user.show(),l=l+", "+a("has participants")):s.user.hide(),n.private_flag?(s.private_flag.show(),l=l+", "+a("private")):s.private_flag.hide(),n.percent_completed>0&&n.percent_completed<100?(s.progress.css("background-size",n.percent_completed+"% 100%").show(),l=l+", "+a("Progress %1$s %",n.percent_completed)):s.progress.css("background-size","0%").hide(),this.attr({"data-index":i,"aria-label":l+"."})}},drawSimpleGrid:function(t){var a=new e.Template({tagName:"li",defaultClassName:"vgrid-cell list-unstyled"}),i=$("<div>");return a.add(s.main),_(t).each(function(e,t){var s=a.getClone();s.update(e,t),s.appendTo(i).node.css("position","relative").data("object-data",e).addClass("hover")}),i}};return s});