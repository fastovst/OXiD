!function(e){"use strict";var t=function(e){var n=e,i=function(){return n};return{get:i,set:function(e){n=e},clone:function(){return t(i())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),i={get:function(e){return{isFullscreen:function(){return null!==e.get()}}}},r={fireFullscreenStateChanged:function(e,t){e.fire("FullscreenStateChanged",{state:t})}},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils").DOM,o=function(){var t,n,i=e.window,r=e.document.body;return r.offsetWidth&&(t=r.offsetWidth,n=r.offsetHeight),i.innerWidth&&i.innerHeight&&(t=i.innerWidth,n=i.innerHeight),{w:t,h:n}},c=function(){var e=l.getViewPort();return{x:e.x,y:e.y}},s=function(t){e.window.scrollTo(t.x,t.y)},u={toggleFullscreen:function(t,n){var i,u,d,a,h=e.document.body,f=e.document.documentElement,g=n.get(),m=function(){l.setStyle(d,"height",o().h-(u.clientHeight-d.clientHeight))},w=function(){l.unbind(e.window,"resize",m)};if(u=t.getContainer(),i=u.style,d=t.getContentAreaContainer().firstChild,a=d.style,g)a.width=g.iframeWidth,a.height=g.iframeHeight,g.containerWidth&&(i.width=g.containerWidth),g.containerHeight&&(i.height=g.containerHeight),l.removeClass(h,"mce-fullscreen"),l.removeClass(f,"mce-fullscreen"),l.removeClass(u,"mce-fullscreen"),s(g.scrollPos),l.unbind(e.window,"resize",g.resizeHandler),t.off("remove",g.removeHandler),n.set(null),r.fireFullscreenStateChanged(t,!1);else{var v={scrollPos:c(),containerWidth:i.width,containerHeight:i.height,iframeWidth:a.width,iframeHeight:a.height,resizeHandler:m,removeHandler:w};a.width=a.height="100%",i.width=i.height="",l.addClass(h,"mce-fullscreen"),l.addClass(f,"mce-fullscreen"),l.addClass(u,"mce-fullscreen"),l.bind(e.window,"resize",m),t.on("remove",w),m(),n.set(v),r.fireFullscreenStateChanged(t,!0)}}},d={register:function(e,t){e.addCommand("mceFullScreen",function(){u.toggleFullscreen(e,t)})}},a=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}},h={register:function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:a(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:a(e)})}};n.add("fullscreen",function(e){var n=t(null);return e.settings.inline?i.get(n):(d.register(e,n),h.register(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen"),i.get(n))})}(window);