define("io.ox/core/ping",["io.ox/core/http","settings!io.ox/core"],function(e,n){"use strict";function o(){!ox.session||"unset"===ox.session||!ox.online||_.device("phantomjs || karma")||_.now()-ox.t0<1e4||e.ping()}function a(){l&&clearInterval(l)}function t(){"normal"!==c&&(a(),c="normal",ox.reachable=!0,ox.trigger("reachableChange"),i&&(o(),l=setInterval(o,1e3*r)))}var i=n.get("ping/enabled",!1),r=n.get("ping/interval",30),c="none",l=null;e.on("unreachable",function(){"hectic"!==c&&(a(),ox.reachable=!1,ox.trigger("reachableChange"),c="hectic",o(),l=setInterval(o,200*r))}),e.on("reachable",t),t()});