define("io.ox/core/folder/actions/rename",["io.ox/core/folder/api","io.ox/backbone/views/modal","io.ox/core/extensions","io.ox/core/yell","gettext!io.ox/core"],function(e,t,o,n,i){"use strict";function r(t,i){var r=!1;return o.point("io.ox/core/filename").invoke("validate",null,i.title,"folder").find(function(e){if(!0!==e)return n("warning",e),r=!0}),r?$.Deferred().reject():e.update(t,i).fail(n)}return function(o){var a=e.pool.getModel(o);a.get("standard_folder")?n("error",i("This is a standard folder, which can't be renamed.")):new t({title:i("Rename folder"),async:!0,width:400,enter:"rename"}).build(function(){this.$body.append(this.$input=$('<input class="form-control" type="text">').attr({placeholder:i("Folder name"),"aria-labelledby":this.$title.attr("id")}).val(a.get("title")))}).addCancelButton().addButton({label:i("Rename"),action:"rename"}).on("rename",function(){r(o,{title:this.$input.val()}).then(this.close,this.idle)}).open()}});