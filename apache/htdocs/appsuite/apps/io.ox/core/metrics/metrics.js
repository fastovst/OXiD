define("io.ox/core/metrics/metrics",["io.ox/files/api","io.ox/core/http"],function(e,t){"use strict";var r={getTime:function(){return _.now()-ox.t0},toSeconds:function(e){return Number(e/1e3).toFixed(2)},formatTimestamp:function(e){return this.toSeconds(e)+"s"},getBrowser:function(){var e=_.browser;return e.Chrome?"Chrome "+e.Chrome:e.Firefox?"Firefox "+e.Firefox:e.Safari?"Safari "+e.Safari:e.IE?"IE "+e.IE:"Unknown"},debug:function(){ox.on("login core:load core:ready app:start app:ready app:resume app:stop",function(e){var t=r.formatTimestamp(r.getTime());console.log("Event",t,e)})},store:{toFile:function(){function r(t,r){return e.getAll(t).then(function(o){var i=_(o).find(function(e){return e.title===r});return i?e.get({id:i.id,folder:i.folder_id}):n(t,r).then(function(r){return e.get({folder_id:t,id:r})})})}function n(e,r){return t.PUT({module:"files",params:{action:"new"},data:{folder_id:e,title:r},appendColumns:!1})}return function(t,n,o){if(!o)return $.when();var i=new Date;return r(t,n+"_"+i.getUTCFullYear()+"_"+_.pad(i.getUTCMonth()+1,2)).then(function(t){return e.update({folder_id:t.folder_id,id:t.id},{description:(t.description||"")+"\n"+o})})}}()}};return r});