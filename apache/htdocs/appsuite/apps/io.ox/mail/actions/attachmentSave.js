define("io.ox/mail/actions/attachmentSave",["io.ox/mail/api","io.ox/core/notifications","io.ox/core/tk/dialogs","io.ox/core/folder/picker","io.ox/core/folder/api","settings!io.ox/files","settings!io.ox/core","gettext!io.ox/mail"],function(e,t,o,n,i,a,r,s){"use strict";function c(o,n){t.yell("busy",s.ngettext("Saving attachment ...","Saving attachments ...",o.length)),e.saveAttachments(o,n).then(function(e){function a(e){e.error?t.yell(e.error):t.yell("success",s.ngettext("Attachment has been saved","Attachments have been saved",o.length))}_.isArray(e)?_.each(e,function(e){a(e)}):a(e),i.reload(n,o)},t.yell)}return{multiple:function(e){var t=a.get("folderpopup/last")||r.get("folder/infostore");n({async:!0,button:s("Save"),folder:t,module:"infostore",persistent:"folderpopup",root:"9",settings:a,title:s("Save attachment"),hideTrashfolder:!0,done:function(t,o){c(e,t),o.close()},disable:function(e){return!i.can("create",e)}})}}});