define("io.ox/backbone/mini-views/addresspicker",["io.ox/backbone/mini-views/abstract","io.ox/participants/model","io.ox/contacts/api","io.ox/core/capabilities","io.ox/mail/util","gettext!io.ox/core","less!io.ox/backbone/mini-views/addresspicker"],function(e,i,t,n,o,a){"use strict";return e.extend({tagName:"span",events:{"click button":"onClick"},initialize:function(e){this.opt=_.extend({process:$.noop},e)},onClick:function(e){e.preventDefault();var a=this;require(["io.ox/contacts/addressbook/popup"],function(s){var c=a.opt.useGABOnly||a.opt.isPermission&&!n.has("invite_guests");s.open(function(n){_.each(n,function(n){var s;n.folder_id?t.get(n).done(function(t){n.field&&(t.field=n.field),s=new i.Participant(t),a.opt.process(e,s,n)}):(s=new i.Participant({display_name:o.parseRecipient(n.array[1])[0],email1:n.array[1],field:"email1",type:5}),a.opt.process(e,s,n))})},c)})},render:function(){return this.$el.addClass("input-group-btn").append($('<button type="button" class="btn btn-default">').attr("aria-label",a("Select contacts")).append($('<i class="fa fa-address-book" aria-hidden="true">').attr("title",a("Select contacts")))),this}})});