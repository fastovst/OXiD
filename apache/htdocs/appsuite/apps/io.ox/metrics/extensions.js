define("io.ox/metrics/extensions",["io.ox/core/extensions"],function(t){var e=t.point("io.ox/metrics/extensions");e.extend({id:"upsell",register:function(){var t=this;ox.on("upsell:requires-upgrade",function(e){t.trackEvent({app:"core",target:"upsell/"+e.type,action:e.id,detail:e.missing})})}}),e.extend({id:"app",register:function(){function t(t){t&&e!==t.id&&(e=t.id,a.trackPage({name:t.get("name"),id:t.get("id"),trackingId:t.get("trackingId")}))}var e,a=this;_.defer(function(){ox.ui.App&&t(ox.ui.App.getCurrentApp())}),ox.on("app:start app:resume",t)}}),e.extend({id:"loadtime",register:function(){var t=this;ox.on("loadtime",function(e){var a=e.app,o=a&&a instanceof Backbone.Model?a.get("trackingId")||a.get("name")||a.get("id"):e.id;t.trackEvent({app:"core",target:"loadtime",action:o,value:e.loadEnd-e.loadStart})})}}),e.extend({id:"topbar-logo",register:function(){this.watch({node:$("#io-ox-appcontrol"),selector:"#io-ox-top-logo",type:"click"},{app:"core",target:"topbar/logo",type:"click",action:""})}}),e.extend({id:"topbar-quicklaunch",register:function(){var t=this;$("#io-ox-appcontrol #io-ox-quicklaunch").on("mousedown","button",function(e){t.trackEvent({app:"core",target:"topbar/quicklaunch",type:"click",action:$(e.currentTarget).attr("data-id")})})}}),e.extend({id:"topbar-taskbar",register:function(){var t=this;$("#io-ox-appcontrol .taskbar").on("mousedown","li",function(e){if(!($(e.currentTarget).is("#io-ox-topbar-dropdown-icon")||$(e.currentTarget).hasClass("dropdown")&&$(e.currentTarget).hasClass("open"))){var a=$(e.currentTarget).hasClass("launcher")||$(e.currentTarget).hasClass("dropdown")?$(e.currentTarget).attr("id"):$(e.currentTarget).find("a").attr("data-id");a&&t.trackEvent({app:"core",target:"topbar/taskbar",type:"click",action:a})}})}}),e.extend({id:"topbar-settings-dropdown",register:function(){var t=this;$("#io-ox-topbar-dropdown-icon").on("mousedown",function(){$(this).hasClass("open")||t.trackEvent({app:"core",target:"topbar/settings",type:"click",action:"dropdown/open"})}),$("#topbar-settings-dropdown").on("mousedown","a",function(e){var a=$(e.target).closest("a"),o=a.attr("data-name")||a.attr("data-action")||a.attr("class")||a.parent().attr("class");t.trackEvent({app:"core",target:"topbar/settings",type:"click",action:o})})}}),e.extend({id:"halo",register:function(){var t=this;$(document.documentElement).on("mousedown",".halo-link",function(){var e=ox.ui.App.getCurrentApp()||new Backbone.Model({name:"unknown"});t.trackEvent({app:"core",type:"click",action:"halo",detail:_.last(e.get("name").split("/"))})})}}),e.extend({id:"filestorages",register:function(){var t=this;require(["io.ox/core/api/filestorage"],function(e){var a={create:"created",delete:"deleted",update:"updated"};e.on("create delete update",function(e,o){t.trackEvent({app:"data",target:"drive/account/"+a[e.type],type:"click",action:o.get("filestorageService")})})})}})});