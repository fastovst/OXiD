define("io.ox/tasks/actions",["io.ox/core/extensions","io.ox/backbone/views/actions/util","gettext!io.ox/tasks","io.ox/core/notifications","io.ox/core/print","io.ox/tasks/common-extensions","io.ox/core/folder/api","io.ox/core/pim/actions"],function(o,i,t,e,n,a,s){"use strict";function c(o){var i=s.pool.getModel(o).toJSON();return s.is("shared",i)}var r=i.Action;new r("io.ox/tasks/actions/create",{folder:"create",action:function(o){ox.load(["io.ox/tasks/edit/main"]).done(function(i){i.getApp().launch({folderid:o.folder_id})})}}),new r("io.ox/tasks/actions/edit",{collection:"one && modify",action:function(o){var i=o.first();ox.load(["io.ox/tasks/edit/main"]).done(function(o){o.reuse("edit",i)||o.getApp().launch({taskData:i})})}}),new r("io.ox/tasks/actions/delete",{collection:"some && delete",action:function(o){ox.load(["io.ox/tasks/actions/delete"]).done(function(i){i(o.array())})}}),new r("io.ox/tasks/actions/done",{collection:"some && modify",matches:function(o){return o.collection.has("multiple")||3!==o.first().status},action:function(o){ox.load(["io.ox/tasks/actions/doneUndone"]).done(function(i){i(o.array(),1)})}}),new r("io.ox/tasks/actions/undone",{collection:"some && modify",matches:function(o){return o.collection.has("multiple")||3===o.first().status},action:function(o){ox.load(["io.ox/tasks/actions/doneUndone"]).done(function(i){i(o.array(),3)})}}),new r("io.ox/tasks/actions/move",{collection:"some && delete",matches:function(o){return!o.array().some(function(o){return c(o.folder_id)})},action:function(o){ox.load(["io.ox/tasks/actions/move"]).done(function(i){i(o)})}}),new r("io.ox/tasks/actions/confirm",{collection:"one",matches:function(o){return _(o.first().users).some(function(o){return o.id===ox.user_id})},action:function(o){var i=o.first();ox.load(["io.ox/calendar/actions/acceptdeny","io.ox/tasks/api"]).done(function(o,t){o(i,{taskmode:!0,api:t,callback:function(){t.trigger("update:"+_.ecid({id:i.id,folder_id:i.folder_id}))}})})}}),new r("io.ox/tasks/actions/export",{collection:"some && read",action:function(o){require(["io.ox/core/export"],function(i){i.open("tasks",{list:o.array()})})}}),new r("io.ox/tasks/actions/print",{device:"!smartphone",collection:"some && read",action:function(o){n.request("io.ox/tasks/print",o.array())}}),new r("io.ox/tasks/actions/placeholder",{collection:"one && modify",action:_.noop}),o.point("io.ox/tasks/links/inline").extend({id:"edit",index:100,prio:"hi",mobile:"hi",title:t("Edit"),ref:"io.ox/tasks/actions/edit"},{id:"change-due-date",index:200,prio:"hi",mobile:"lo",title:t("Due"),tooltip:t("Change due date"),ref:"io.ox/tasks/actions/placeholder",customize:a.dueDate},{id:"done",index:300,prio:"hi",mobile:"hi",title:t("Done"),tooltip:t("Mark as done"),ref:"io.ox/tasks/actions/done"},{id:"undone",index:310,prio:"hi",mobile:"hi",title:t("Undone"),tooltip:t("Mark as undone"),ref:"io.ox/tasks/actions/undone"},{id:"delete",index:400,prio:"hi",mobile:"hi",title:t("Delete"),ref:"io.ox/tasks/actions/delete"},{id:"move",index:500,prio:"lo",mobile:"lo",title:t("Move"),ref:"io.ox/tasks/actions/move"},{id:"confirm",index:600,prio:"lo",mobile:"lo",title:t("Change confirmation status"),ref:"io.ox/tasks/actions/confirm"},{id:"export",index:650,prio:"lo",mobile:"lo",title:t("Export"),ref:"io.ox/tasks/actions/export"},{id:"print",index:700,prio:"lo",mobile:"lo",title:t("Print"),ref:"io.ox/tasks/actions/print"})});