define("io.ox/tasks/detail/main",["io.ox/tasks/api","io.ox/core/yell","io.ox/tasks/view-detail","gettext!io.ox/tasks","io.ox/core/extensions"],function(e,t,a,i,o){"use strict";var n="io.ox/tasks/detail";return ox.ui.App.mediator(n,{"show-task":function(n){n.showTask=function(d){var r=_.ecid(d);e.get(d).done(function(t){var d=o.Baton({data:t,app:n}),s=function(e,t){e.type!=="delete:"+r?_(t).each(function(e){e.id===d.data.id&&e.folder_id===d.data.folder_id&&n.quit()}):n.quit()};n.setTitle(t.title),e.on("delete delete:"+r,s),n.on("quit",function(){e.off("delete delete:"+r,s)}),n.getWindowNode().addClass("detail-view-app").append($('<div class="f6-target detail-view-container" tabindex="-1" role="region">').attr("aria-label",i("Task Details")).append(a.draw(d)))}).fail(t)}},metrics:function(e){require(["io.ox/metrics/main"],function(t){function a(e,a){var i=!!(a=$(a)).attr("data-name"),o=(a.attr("data-action")||"").replace(/^io\.ox\/tasks\/(detail\/)?/,"");t.trackEvent({app:"tasks",target:e,type:"click",action:i?a.attr("data-name"):o,detail:i?a.attr("data-value"):""})}t.isEnabled()&&e.getWindow().nodes.body.on("track",function(e,t){a("tasks-standalone/toolbar",t)})})}}),{getApp:function(){var e=ox.ui.createApp({closable:!0,name:n,title:"",floating:!_.device("smartphone")});return e.setLauncher(function(t){var a=ox.ui.createWindow({chromeless:!0,name:n,toolbar:!1,closable:!0,floating:!_.device("smartphone")});e.setWindow(a),e.mediate(),a.show();var i,o=t.cid;if(void 0!==o)return i=_.cid(o),e.folder.set(i.folder_id),e.setState({folder:i.folder_id,id:i.id}),void e.showTask(i);(i=e.getState()).folder&&i.id&&(e.folder.set(i.folder),e.showTask(i))})}}});