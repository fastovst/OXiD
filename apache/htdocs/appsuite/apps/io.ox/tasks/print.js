define("io.ox/tasks/print",["io.ox/core/print","io.ox/calendar/print","io.ox/tasks/api","io.ox/tasks/util","io.ox/calendar/util","gettext!io.ox/tasks"],function(t,e,i,r,n,a){"use strict";function o(t,e,i){var r=t[e];return _.isNumber(r)?moment(r).format(i):""}function c(t){return 2===t.status?"<b>"+l[t.status]+"</b>, "+a("Progress")+": "+(t.percent_completed||0)+"%":"<b>"+l[t.status]+"</b>"}function s(t){return t.priority?d[t.priority]:d[1]}function u(t){return e.load(t).then(function(e){return _.extend(e,{original:t,subject:t.title,start:o(t,"start_time","l"),due:o(t,"end_time","l"),recurrence:n.getRecurrenceString(t),state:c(t),content:$.trim(t.note),target_duration:t.target_duration,actual_duration:t.actual_duration,target_costs:t.target_costs,actual_costs:t.actual_costs,priority:s(t),currency:t.currency,trip_meter:t.trip_meter,billing_information:t.billing_information,companies:t.companies,date_completed:o(t,"date_completed","l LT"),alarm:o(t,"alarm","l LT")})})}var l={1:a("Not started"),2:a("In progress"),3:a("Done"),4:a("Waiting"),5:a("Deferred")},d={1:a("Low"),2:a("Medium"),3:a("High")};return{open:function(e,r){t.smart({get:function(t){return i.get(t)},title:1===e.length?e[0].title:void 0,i18n:{due:a("Due"),start:a("Start"),accepted:a("Accepted"),declined:a("Declined"),tentative:a("Tentatively accepted"),unconfirmed:a("Unconfirmed"),target_duration:a("Estimated duration in minutes"),actual_duration:a("Actual duration in minutes"),target_costs:a("Estimated costs"),actual_costs:a("Actual costs"),trip_meter:a("Distance"),billing_information:a("Billing information"),companies:a("Companies"),date_completed:a("Date completed"),alarm:a("Reminder date"),priority:a("Priority"),recurrence:a("This task recurs")},process:u,selection:e,selector:".task",window:r})}}});