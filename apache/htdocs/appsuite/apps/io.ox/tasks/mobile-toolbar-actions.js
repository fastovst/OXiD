define("io.ox/tasks/mobile-toolbar-actions",["io.ox/core/extensions","io.ox/backbone/views/toolbar","io.ox/backbone/views/actions/mobile","io.ox/tasks/api","gettext!io.ox/tasks","io.ox/tasks/actions"],function(o,e,i,t,a){"use strict";var n={create:{prio:"hi",mobile:"hi",title:a("New task"),icon:"fa fa-plus",drawDisabled:!0,ref:"io.ox/tasks/actions/create"},edit:{prio:"hi",mobile:"hi",icon:"fa fa-pencil",title:a("Edit"),ref:"io.ox/tasks/actions/edit",drawDisabled:!0},delete:{prio:"hi",mobile:"hi",icon:"fa fa-trash-o",title:a("Delete"),ref:"io.ox/tasks/actions/delete",drawDisabled:!0},done:{prio:"hi",mobile:"hi",icon:"fa fa-check",title:a("Mark as done"),ref:"io.ox/tasks/actions/done",drawDisabled:!0},undone:{prio:"hi",mobile:"lo",title:a("Mark as undone"),ref:"io.ox/tasks/actions/undone"},confirm:{prio:"hi",mobile:"lo",title:a("Change confirmation status"),ref:"io.ox/tasks/actions/confirm"},move:{prio:"hi",mobile:"lo",title:a("Move"),ref:"io.ox/tasks/actions/move"},export:{prio:"hi",mobile:"lo",title:a("Export"),ref:"io.ox/tasks/actions/export"}},s={listView:"io.ox/tasks/mobile/toolbar/listView",detailView:"io.ox/tasks/mobile/toolbar/detailView"};i.addAction(s.listView,n,["create"]),i.addAction(s.detailView,n,["edit","done","delete","undone","confirm","move","export"]),i.createToolbarExtensions(s);var r=_.debounce(function(e){var i=this;t.get(e).done(function(e){if(e){var t=o.Baton({data:e,app:i});i.pages.getToolbar("detailView").setBaton(t)}})},50);o.point("io.ox/tasks/mediator").extend({id:"toolbar-mobile",index:10100,setup:function(o){_.device("!smartphone")||(o.updateToolbar=r)}}),o.point("io.ox/tasks/mediator").extend({id:"update-toolbar-mobile",index:10300,setup:function(e){function i(i){!0===e.props.get("checkboxes")&&(0!==i.length?t.getList(i).done(function(i){if(i){var t=o.Baton({data:i,app:e});e.pages.getSecondaryToolbar("listView").setBaton(t)}}):e.pages.getSecondaryToolbar("listView").setBaton(o.Baton({data:[],app:e})))}_.device("smartphone")&&(t.on("update",function(o,i){e.updateToolbar(i)}),e.grid.on("change:ids",function(){e.folder.getData().done(function(i){var t=o.Baton({data:i,app:e});e.pages.getToolbar("listView").setBaton(t)})}),e.grid.selection.on("pagechange:detailView",function(){var o=e.grid.selection.get();e.updateToolbar(o[0])}),e.grid.selection.on("change",function(o,e){i(e)}),e.props.on("change:checkboxes",function(){i(e.grid.selection.get())}))}}),o.point("io.ox/tasks/mediator").extend({id:"change-mode-toolbar-mobile",index:10400,setup:function(o){_.device("smartphone")&&o.props.on("change:checkboxes",function(e,i){o.pages.toggleSecondaryToolbar("listView",i)})}})});