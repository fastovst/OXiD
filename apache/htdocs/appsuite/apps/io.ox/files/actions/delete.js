define("io.ox/files/actions/delete",["io.ox/files/api","io.ox/core/folder/api","io.ox/backbone/views/modal","io.ox/core/notifications","gettext!io.ox/files"],function(e,t,o,n,i){"use strict";function r(e){return e.isFile&&e.isFile()}function l(o){var l=_(o).filter(r),s=_(o).reject(r);e.remove(_(l).invoke("toJSON")).fail(function(e){e&&e.code&&"IFO-0415"===e.code?n.yell("error",i.ngettext("This file has not been deleted, as it is locked by its owner.","These files have not been deleted, as they are locked by their owner.",o.length)):n.yell("error",i.ngettext("This file has not been deleted","These files have not been deleted",o.length)+"\n"+e.error)}),t.remove(_(s).map(function(e){return e.get("id")}))}return function(e){e=_.isArray(e)?e:[e];var t=i.ngettext("Do you really want to delete this item?","Do you really want to delete these items?",e.length),n=i.ngettext("This file (or folder) is shared with others. It won't be available for them any more.","Some files/folder are shared with others. They won't be available for them any more.",e.length);new o({title:t,description:!!function(){if(-1!==_.findIndex(e,function(e){return e.get("object_permissions")?0!==e.get("object_permissions").length:e.get("permissions").length>1}))return!0}()&&n}).addCancelButton().addButton({label:i("Delete"),action:"delete"}).on("delete",function(){_.defer(function(){l(e)})}).open()}});