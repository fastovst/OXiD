define("io.ox/calendar/extensions",["io.ox/core/extensions","io.ox/calendar/util","io.ox/core/folder/api","gettext!io.ox/calendar"],function(t,e,o,a){"use strict";t.point("io.ox/calendar/appointment").extend({id:"default",index:100,draw:function(){function t(t,r){var n=o.pool.getModel(r.get("folder")).toJSON(),d=e.getAppointmentColor(n,r),l=e.getForegroundColor(d),s=e.getColorName(d);if(!d)return t.css({"background-color":"",color:"","border-left-color":""}).data("background-color",null),void t.removeClass("white black");t.css({"background-color":d,color:l,"border-left-color":"white"===l?"":l}).data("background-color",d),t.addClass("white"===l?"white":"black"),e.canAppointmentChangeColor(n,r)&&t.attr("data-folder",n.id),s&&t.attr("aria-label",i(r)+", "+a("Category")+": "+s)}function i(t){return _([t.get("summary"),t.get("location")]).compact().join(", ")}return function(r){var n=r.model,d=o.pool.getModel(n.get("folder")),l=d.toJSON(),s=n.get("folder");if(this.removeClass("modify private disabled needs-action accepted declined tentative"),this.attr("aria-label",i(n)),String(l.id)===String(s)?t(this,n):void 0!==s&&o.get(s).done(t.bind(this,this,n)),l.module||o.once("after:flat:event",t.bind(this,this,n)),e.isPrivate(n)&&ox.user_id!==(n.get("createdBy")||{}).entity&&!o.is("private",l))this.addClass("private disabled");else{var c=o.can("write",l,n.attributes)&&e.allowedToEdit(n.toJSON(),d),g=e.getConfirmationStatus(n);e.isPrivate(n)&&this.addClass("private"),c&&this.addClass("modify"),this.addClass(e.getShownAsClass(n)+" "+e.getConfirmationClass(g))}this.append($('<div class="appointment-content" aria-hidden="true">').attr("title",i(n)).append($('<div class="title-container">').append(e.returnIconsByType(n).type,n.get("summary")?$('<div class="title">').text(a.format("%1$s",n.get("summary")||" ")):""),n.get("location")?$('<div class="location">').text(n.get("location")||" "):"")).attr({"data-extension":"default"})}}()})});