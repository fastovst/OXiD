define("io.ox/settings/security/certificates/settings/pane",["io.ox/core/extensions","gettext!io.ox/settings/certificates","io.ox/core/api/certificate","io.ox/backbone/mini-views/settings-list-view","io.ox/settings/security/certificates/settings/certificate-view","io.ox/backbone/mini-views/listutils","static/3rd.party/jquery-ui.min.js"],function(e,t,i,n,s,o){"use strict";function a(){return i.getAll().done(function(e){p.reset(e)})}function r(){var e=t("The certificate list is empty"),i=d.find(".hint");0===p.length?0!==i.length&&i.text(e):i.empty()}var d,c=Backbone.Model.extend({idAttribute:"fingerprint"}),l="io.ox/settings/security/certificates/settings/detail",p=new(Backbone.Collection.extend({model:c}));i.on("update",a),p.on("remove add reset",r),e.point(l).extend({index:100,draw:function(){var t=this;d=$('<div class="io-ox-certificate-settings">').busy(),t.append(d),a().done(function(){e.point(l+"/pane").invoke("draw",d),r(),d.idle()})}}),e.point(l+"/pane").extend({index:100,id:"header",draw:function(){this.addClass("io-ox-certificate-settings").append($('<div class="row">').append($('<h1 class="col-md-8 col-xs-8">').text(t("Certificates"))),$('<div class="hint">'))}}),e.point(l+"/pane").extend({index:300,id:"list",draw:function(){this.append(new n({collection:p,sortable:!1,containment:this,childView:s.CertificateSettingsView,dataIdAttribute:"fingerprint"}).render().$el)}}),e.point(l+"/view").extend({id:"state",index:100,draw:function(e){this[e.model.toJSON().trusted?"removeClass":"addClass"]("disabled")}}),e.point(l+"/view").extend({id:"title",index:400,draw:function(e){var i=e.model.toJSON(),n=i.hostname,s=i.fingerprint;this.append(o.makeTitle(n).removeClass("pull-left").append(o.makeSubTitle(s,t("Fingerprint")).removeClass("pull-left")))}}),e.point(l+"/view").extend({id:"controls",index:500,draw:function(e){var i=e.model.toJSON(),n=i.hostname,s=o.makeControls(),a=o.controlsToggle();i.trusted?s.append(o.appendIconText(a.attr({"aria-label":t("Untrust certificate %1$s",n)}),t("Untrust"),"untrust")):s.append(o.appendIconText(a.attr({"aria-label":t("Trust certificate %1$s",n)}),t("Trust"),"trusted")),s.append(o.controlsDelete({title:t("Remove certificate %1$s",n)})),this.append(s)}})});