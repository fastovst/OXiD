define("io.ox/contacts/detail/main",["io.ox/contacts/api","io.ox/core/yell","io.ox/contacts/view-detail","gettext!io.ox/contacts","io.ox/core/extensions","io.ox/contacts/util"],function(t,e,o,a,i,n){"use strict";var c="io.ox/contacts/detail";return ox.ui.App.mediator(c,{"show-contact":function(c){c.showContact=function(d){t.get(d).done(function(e){var d=i.Baton({data:e}),r=n.getFullName(e),s=a(e.mark_as_distributionlist?"Distribution List Details":"Contact Details");c.setTitle(r),t.on("delete:"+_.ecid(e),function(){c.quit()}),c.on("quit",function(){t.off("delete:"+_.ecid(e),function(){c.quit()})}),c.getWindowNode().addClass("detail-view-app").append($('<div class="f6-target detail-view-container" role="region" tabindex="-1">').attr("aria-label",s).append(o.draw(d)))}).fail(e)}},metrics:function(t){require(["io.ox/metrics/main"],function(e){function o(t,o){var a=!!(o=$(o)).attr("data-name"),i=(o.attr("data-action")||"").replace(/^io\.ox\/contacts\/(detail\/)?/,"");e.trackEvent({app:"contacts",target:t,type:"click",action:a?o.attr("data-name"):i,detail:a?o.attr("data-value"):""})}e.isEnabled()&&t.getWindow().nodes.body.on("track",function(t,e){o("contacts-standalone/toolbar",e)})})}}),{getApp:function(){var t=ox.ui.createApp({closable:!0,name:c,title:"",floating:!_.device("smartphone")});return t.setLauncher(function(e){var o=ox.ui.createWindow({chromeless:!0,name:c,toolbar:!1,floating:!_.device("smartphone"),closable:!0});t.setWindow(o),t.mediate(),o.show();var a,i=e.cid;if(void 0!==i)return a=_.cid(i),t.setState({folder:a.folder_id,id:a.id}),void t.showContact(a);(a=t.getState()).folder&&a.id&&t.showContact(a)})}}});