define("io.ox/chat/views/searchResult",["io.ox/backbone/views/disposable","io.ox/chat/events","io.ox/chat/data"],function(e,t,i){"use strict";function s(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}return e.extend({tagName:"ul",className:"search-result",initialize:function(){this.listenTo(t,"cmd:search",function(e){this.search(e)})},render:function(){return this.$el.hide(),this},search:function(e){var t=i.API_ROOT+"/messages?"+$.param({q:e});$.getJSON(t).done(this.renderResult.bind(this,e))},renderResult:function(e,t){this.regexQuery=new RegExp("(\\b"+s(e)+")","ig"),this.$el.empty().append(_(t).map(this.renderItem,this)),this.$el.show()},renderItem:function(e){var t=_.escape(_.ellipsis(e.body,{max:200})).replace(this.regexQuery,"<b>$1</b>");return $("<li>").html(t)}})});