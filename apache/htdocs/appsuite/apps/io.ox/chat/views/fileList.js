define("io.ox/chat/views/fileList",["io.ox/backbone/views/disposable","io.ox/chat/data"],function(e,t){"use strict";return e.extend({className:"files abs",initialize:function(){this.collection=t.files,this.listenTo(this.collection,{add:this.onAdd}),this.collection.fetch()},render:function(){return this.$el.append($('<div class="header abs">').append($("<h2>").append("All files")),$('<div class="scrollpane abs">').append($("<ul>").append(this.getItems().map(this.renderItem,this)))),this},getItems:function(){return this.collection},renderItem:function(e,t){return $("<li>").append($('<button type="button" data-cmd="show-file">').attr("data-index",t).css("backgroundImage","url("+e.getThumbnailUrl()+")"))},getNode:function(e){return this.$('[data-id="'+$.escape(e.get("id"))+'"]')},onAdd:_.debounce(function(e,t,i){this.$("ul").prepend(i.changes.added.map(this.renderItem,this))},1)})});