define("io.ox/multifactor/login/loginScreen",["io.ox/core/extensions","io.ox/core/main/addLauncher","gettext!io.ox/core","io.ox/backbone/mini-views/dropdown","io.ox/core/main/appcontrol","io.ox/core/main/icons","io.ox/core/api/apps","less!io.ox/multifactor/login/style"],function(o,e,r,t){"use strict";function i(o){o.append(e("right",$('<i class="fa fa-refresh launcher-icon" aria-hidden="true">').attr("title",r("Refresh")),function(){return $.when()},r("Refresh")).attr("id","io-ox-refresh-icon"));var i=$('<a href="#" class="dropdown-toggle f6-target" data-toggle="dropdown" tabindex="-1">').attr("title",r("Settings")),n=new t({tagName:"li",id:"io-ox-topbar-dropdown-icon",className:"launcher dropdown",$toggle:i}),a=$('<div class="contact-picture">').append("...");i.append(a),o.append(n.render().$el)}function n(){$("body").append($('<iframe class="multifactorBackground" src="'+ox.serverConfig.multifactorBackground+'">')),document.styleSheets[0].insertRule(".modal-backdrop.in { opacity: 0.1 !important; }",0),a=!0}var a=!1;return{create:function(){if(ox.serverConfig.multifactorBackground)n();else{var e=$("#io-ox-appcontrol");o.point("io.ox/core/appcontrol").invoke("draw",e),$("#io-ox-core").show(),i(e.find(".taskbar")),require(["io.ox/core/main/designs"])}},destroy:function(){$("#io-ox-appcontrol").empty(),$(".multifactorBackground").remove(),a&&document.styleSheets[0].deleteRule(0)}}});