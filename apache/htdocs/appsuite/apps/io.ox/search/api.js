define("io.ox/search/api",["io.ox/core/http","io.ox/core/cache","io.ox/core/api/factory","settings!io.ox/contacts"],function(e,o,t,n){"use strict";function i(e){var o=e.params.module,n=_.extend(u[o]);if(e.params.loadercolumns){var i=n.columns.split(","),a=e.params.loadercolumns.split(",");delete e.params.loadercolumns,n.columns=_.union(i,a).join(",")}return{params:{columns:t.extendColumns(n.extendColumns,o,n.columns)}}}function a(e){var o=_.copy(s.options.requests[e],!0);return _.extend(o.data.options,{admin:n.get("showAdmin",!1)}),o}var s=t({id:"search",module:"find",requests:{autocomplete:{module:"find",method:"PUT",params:{action:"autocomplete",module:"",limit:6},data:{prefix:"",options:{timezone:"UTC"},facets:[]}},query:{module:"find",method:"PUT",params:{action:"query",module:""},data:{facets:[],options:{timezone:"UTC"},start:0,size:100}}}}),u={mail:{columns:"102,600,601,602,603,604,605,606,607,608,610,611,614,652,654,655",extendColumns:"io.ox/mail/api/list"},files:{columns:"20,23,1,5,700,702,703,704,705,707,3",extendColumns:"io.ox/files/api/list"},tasks:{columns:"1,20,101,200,202,203,220,300,301,309",extendColumns:"io.ox/tasks/api/list"},contacts:{columns:"20,1,101,500,501,502,505,520,524,555,556,557,569,592,602,606,607,5",extendColumns:"io.ox/contacts/api/list"},calendar:{columns:"1,20,101,206,207,201,200,202,400,401,402,221,224,227,2,209,212,213,214,215,222,216,220",extendColumns:"io.ox/calendar/api/list"}},l=new o.SimpleCache("search-find");return s.cid=function(e){return JSON.stringify(e)},s.autocomplete=function(o){var t=$.extend(!0,{},a("autocomplete"),o),n=s.cid(t);return l.get(n).then(function(o){return null!==o?o:e[t.method](t).then(l.add.bind(this,n))})},s.query=function(o){var t=$.extend(!0,{},a("query"),i(o),o);return e[t.method](t)},s});