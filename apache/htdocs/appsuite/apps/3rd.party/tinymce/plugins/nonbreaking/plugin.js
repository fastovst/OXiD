!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n,e){for(var t="",i=0;i<e;i++)t+=n;return t},t=function(n){return!!n.plugins.visualchars&&n.plugins.visualchars.isEnabled()},i={insertNbsp:function(n,i){var r=t(n)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";n.insertContent(e(r,i)),n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}},r={register:function(n){n.addCommand("mceNonBreaking",function(){i.insertNbsp(n,1)})}},a=tinymce.util.Tools.resolve("tinymce.util.VK"),o={getKeyboardSpaces:function(n){var e=n.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e}},s={setup:function(n){var e=o.getKeyboardSpaces(n);e>0&&n.on("keydown",function(t){if(t.keyCode===a.TAB&&!t.isDefaultPrevented()){if(t.shiftKey)return;t.preventDefault(),t.stopImmediatePropagation(),i.insertNbsp(n,e)}})}},c={register:function(n){n.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),n.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})}};n.add("nonbreaking",function(n){r.register(n),c.register(n),s.setup(n)})}();