define("plugins/administration/resources/settings/pane",["io.ox/core/extensions","io.ox/backbone/views/disposable","io.ox/core/api/backbone","io.ox/core/tk/list","io.ox/core/api/resource","plugins/administration/resources/settings/toolbar","io.ox/core/tk/list-contextmenu","gettext!io.ox/core","less!plugins/administration/resources/settings/style"],function(e,t,i,s,n,o,a,r){"use strict";var l=s.extend(a);e.point("plugins/administration/resources/settings/detail").extend({draw:function(){this.removeClass("scrollable-pane").addClass("abs").append((new d).render().$el)}});var d=t.extend({className:"resource-administration",events:{"dblclick .list-item":"onDoubleClick"},onDoubleClick:function(e){var t=$(e.currentTarget).attr("data-cid");"0"!==t&&require(["plugins/administration/resources/settings/edit"],function(e){e.open({id:t})})},initialize:function(){this.listView=new l({ignoreFocus:!0,pagination:!1,ref:"administration/resources/listview"}),this.listView.toggleCheckboxes(!1),this.listView.getCompositeKey=function(e){return e.id},this.listView.setCollection(n.collection),this.load(),this.listenTo(this.listView,"selection:change",function(e){this.show(e),this.toolbar.update(e)}),this.listenTo(n.collection,"change",function(e){this.model===e&&this.renderDetails()}),this.toolbar=o.create(),this.on("dispose",function(){this.$el.parent().addClass("scrollable-pane").removeClass("abs")})},load:function(){n.search("*").done(function(e){this.disposed||n.collection.reset(e,{parse:!0})}.bind(this))},show:function(e){1===e.length&&(this.model=n.getModel(e[0]),this.renderDetails())},renderDetails:function(){var e=this.model.get("description"),t=(this.model.get("mailaddress")||"").toLowerCase();this.$(".detail-pane").empty().append($("<h2>").text(this.model.get("display_name")),e?$('<p style="white-space: pre-line">').text(e):[],t?$("<p>").append($("<a>").attr("href","mailto:"+t).text(t)):[])},render:function(){return this.$el.append($("<h1>").text(r("Resources")),this.toolbar.render().update().$el,$('<div class="abs below-toolbar">').append(this.listView.render().$el.addClass("leftside"),$('<div class="rightside detail-pane">'))),this}});e.point("administration/resources/listview/item").extend({draw:function(e){this.append($('<div class="bold">').text(e.model.get("display_name")))}});var c=[{id:"administration/resources/edit",section:"organize",title:r("Edit")},{id:"administration/resources/delete",section:"organize",title:r("Delete")}];e.point("administration/resources/listview/contextmenu").extend(c.map(function(e,t){return _.extend({id:e.id,index:100*(t+1),title:e.title,ref:e.id,section:e.section},e)}))});