define("plugins/portal/contacts/register",["io.ox/core/extensions","io.ox/contacts/api","io.ox/portal/widgets"],function(t,e,i){"use strict";t.point("io.ox/portal/widget/stickycontact").extend({type:"contacts",load:function(t){var i=t.model.get("props")||{};return e.get({folder:i.folder_id,id:i.id}).then(function(e){t.data=e},function(t){throw"CON-0125"===t.code?"remove":t})},preview:function(t){e.on("delete",function(e,o){o.id===t.data.id&&o.folder_id===t.data.folder_id&&i.getCollection().remove(t.model)});var o=t.data.distribution_list||[],n=$('<ul class="content pointer list-unstyled">');_(o).each(function(t){n.append($('<li class="paragraph">').append($('<div class="bold">').text(t.display_name),$('<div class="accent">').text(t.mail)))}),this.append(n)},draw:function(t){var i=this.busy();require(["io.ox/contacts/view-detail"],function(o){var n=e.reduce(t.data);e.get(n).done(function(t){i.idle().append(o.draw(t))})})}})});