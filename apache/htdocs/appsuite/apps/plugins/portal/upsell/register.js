define("plugins/portal/upsell/register",["io.ox/core/extensions","gettext!plugins/portal","io.ox/core/upsell","settings!io.ox/core"],function(e,t,i,s){"use strict";function a(e){$(e.target).closest(".disable-widget").length>0||i.trigger({type:"custom",id:o,missing:i.missing(n.requires)})}var o="portal-widget",n=_.extend({title:t("Upgrade your account"),requires:"active_sync || caldav || carddav",removable:!1,icon:s.get("upsell/defaultIcon","fa-star")},s.get("features/upsell/"+o),s.get("features/upsell/"+o+"/i18n/"+ox.language));e.point("io.ox/portal/widget/upsell").extend({title:n.title,preview:function(){n.imageURL?this.addClass("photo-stream").append($('<div class="content" tabindex="0" role="button">').css("backgroundImage","url("+n.imageURL+")")):this.append($('<div class="content centered" style="cursor: pointer; padding-top: 3em;">').append($("<h2>").append($.txt(n.title+" "),_(n.icon.split(/ /)).map(function(e){return $('<i class="fa">').addClass(e)})))),this.off("click",a),this.on("click",a),n.removable||$(".disable-widget",this).remove()}})});