define("plugins/halo/xing/register",["io.ox/core/extensions","plugins/portal/xing/actions","plugins/portal/xing/activities","gettext!plugins/portal","less!plugins/portal/xing/xing"],function(e,n,a,i){"use strict";var t,r,o,p,s,m,d,l=i("XING"),g={ENTREPRENEUR:i("Entrepreneur"),FREELANCER:i("Freelancer"),EMPLOYEE:i("Employee"),EXECUTIVE:i("Executive"),RECRUITER:i("Recruiter"),PUBLIC_SERVANT:i("Public servant"),STUDENT:i("Student"),UNEMPLOYED:i("Unemployed"),RETIRED:i("Retired")};d=function(e){return _(e).isEmpty()||0===_(_(e).values()).compact().length},m=function(e){return[$("<div>").addClass("physical-address").text(s(e)),$("<div>").addClass("email-address").text(e.email),$("<div>").addClass("phone").text(e.phone),$("<div>").addClass("mobile").text(e.mobile_phone)]},s=function(e){return i("%1$s\n%2$s %3$s\n%4$s\n%5$s",e.street||"",e.zip_code||"",e.city||"",e.province||"",e.country||"")},t=function(e){var n,a=e.profile.display_name;return n=$("<div>").addClass("shortest-path").append($("<p>").addClass("intro").text(i("You are not directly linked to %s. Here are people who are linked to %s:",a,a))),_(e.path).each(function(e){n.append(o(e),$("<i>").addClass("fa fa-5x fa-caret-right connection"))}),n.find(".connection").last().remove(),e.profile&&n.append($("<i>").addClass("fa fa-5x fa-caret-right connection"),o(e.profile)),n},r=function(e){var n=$("<div>").addClass("shared-contacts").append($("<p>").addClass("intro").text(i("Your shared contacts:")));return _(e.sharedContacts).each(function(e){n.append(o(e))}),n},o=function(e){var n,a;return n=_.device("smartphone")?e.photo_urls.thumb:e.photo_urls.maxi_thumb,a=e.permalink?$("<a>").attr({href:e.permalink,target:"_blank"}).addClass("permalink").text(e.display_name):$("<p>").text(e.display_name),$("<div>").addClass("mini-profile").append($("<div>").css({"background-image":"url("+n+")"}).addClass("pic"),a)},p=function(e){var n;if(n=$("<div>").addClass("extended-profile"),e.birth_date&&!d(e.birth_date)){var a=e.birth_date,t=moment({year:a.year,month:a.month,day:a.day});n.append($("<div>").addClass("birthdate extended-profile-block").append($("<legend>").addClass("header").text(i("Date of birth")),$("<p>").text(t.format("l"))))}if(e.business_address&&!d(e.business_address)&&n.append($("<div>").addClass("business-address extended-profile-block").append($("<legend>").addClass("header").text(i("Business address")),m(e.business_address))),e.private_address&&!d(e.private_address)&&n.append($("<div>").addClass("private-address extended-profile-block").append($("<legend>").addClass("header").text(i("Private address")),m(e.private_address))),e.employment_status||e.professional_experience&&e.professional_experience.primary_company){var r=e.employment_status,o=e.professional_experience.primary_company,p=_(_(g).keys()).contains(r),s=!!o.name,l=$("<p>");p&&s?l.text(i("%1$s at %2$s",g[r],o.name)):p&&!s?l.text(g[r]):!p&&s&&l.text(o.name),(p||s)&&n.append($("<div>").addClass("employment extended-profile-block").append($("<legend>").addClass("header").text(i("Employment")),l))}return n},e.point("io.ox/halo/contact:renderer").extend({id:"xing",handles:function(e){return"com.openexchange.halo.xing"===e},draw:function(e){var n,a=this,s=$.Deferred(),m=e.data.values?e.data.values[0]:e.data,d=!0;return n=$("<div>").addClass("io-ox-xing halo clear").append($("<div>").addClass("widget-title clear-title").text(l)),"annamariaoberhuber"===e.contact.display_name&&(m.sharedContacts=[{display_name:"Herbert",page_name:"Herbert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bernie",page_name:"Bernie",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bert",page_name:"Bert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Herbert Zwo",page_name:"Herbert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bernie Zwo",page_name:"Bernie",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bert Zwo",page_name:"Bert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Ernie",page_name:"Ernie",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"http://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Tiling_Regular_4-4_Square.svg/200px-Tiling_Regular_4-4_Square.svg.png"}}]),"ewaldbartkowiak"===e.contact.display_name&&(m.path=[{display_name:"Herbert",page_name:"Herbert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bernie",page_name:"Bernie",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bert",page_name:"Bert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Herbert Zwo",page_name:"Herbert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bernie Zwo",page_name:"Bernie",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Bert Zwo",page_name:"Bert",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"https://www.xing.com/img/n/nobody_f.70x93.jpg"}},{display_name:"Ernie",page_name:"Ernie",permalink:"https://www.xing.com/profile/AnnaMaria_Oberhuber",photo_urls:{mini_thumb:"https://www.xing.com/img/n/nobody_f.18x24.jpg",maxi_thumb:"http://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Tiling_Regular_4-4_Square.svg/200px-Tiling_Regular_4-4_Square.svg.png"}}]),m.status&&404===m.status&&n.append($("<div>").text(i("Sorry, could not connect to %s right now.",l))),m.profile&&(n.append(o(m.profile),p(m.profile)),d=!1),m.path&&m.path.length>0?(t(m).appendTo(n),d=!1):m.sharedContacts&&m.sharedContacts.length>0&&(r(m).appendTo(n),d=!1),d&&n.append($("<div>").text(i("Sorry, there is no data available for you on %s.",l))),a.append(n),s.resolve(),s}})});